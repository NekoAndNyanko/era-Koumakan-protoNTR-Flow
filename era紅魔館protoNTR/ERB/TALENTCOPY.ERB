;------------------------------------------------
;キャラコピー諸々
;------------------------------------------------
@CHARACROSS(ARG)

ADDCHARA 0

		FOR LOCAL,0,56
		ABL:ARG:LOCAL = ABL:(ARG+1):LOCAL
		NEXT
		
		FOR LOCAL,0,14
		BASE:ARG:LOCAL = BASE:(ARG+1):LOCAL
		NEXT
		
		FOR LOCAL,0,191
		TALENT:ARG:LOCAL = TALENT:(ARG+1):LOCAL
		NEXT
		
		FOR LOCAL,0,94
		EXP:ARG:LOCAL = EXP:(ARG+1):LOCAL
		NEXT
		
		CFLAG:ARG:7 = CFLAG:(ARG+1):7
		
		CFLAG:ARG:298 = CFLAG:(ARG+1):298
		CFLAG:ARG:310 = CFLAG:(ARG+1):310
		CFLAG:ARG:311 = CFLAG:(ARG+1):311
		CFLAG:ARG:312 = CFLAG:(ARG+1):312
		
		NAME:ARG = %NAME:(ARG+1)%
		CALLNAME:ARG = %CALLNAME:(ARG+1)%
		NO:ARG = NO:(ARG+1)
		
		DELCHARA (ARG+1)

RETURN 0	

;------------------------------------------------
@REVERSEMODE_1
#DIM WK_ARG

PRINTL 紅魔館の誰かとしてプレイします
$INPUT_LOOP
PRINTL 誰になりますか？
PRINTL [1] 美鈴
PRINTL [2] 小悪魔
PRINTL [3] パチュリー
PRINTL [4] 咲夜
PRINTL [5] レミリア
PRINTL [6] フラン
PRINTL [7] 子悪魔
PRINTL [8] チルノ
PRINTL [9] 大妖精
PRINTL [10] 魔理沙
PRINTL [11] 霊夢
PRINTL [12] ルーミア
PRINTL [13] アリス
	
INPUT
IF 0 < RESULT && RESULT < 開始時人数
	$INPUT_LOOP_1
	TARGET = RESULT
	ADDCHARA RESULT
	PRINTFORML %CALLNAME:1%で始めます。よろしいですか？
	PRINTL [0] はい
	PRINTL [1] 考え直す
		INPUT
		IF RESULT == 0
			DELCHARA 0
			MASTER = 0
			TARGET = MASTER
			PLAYER = MASTER
			WK_ARG = CFLAG:MASTER:311
			CFLAG:MASTER:311 = 15
			
			FOR LOCAL,1,開始時人数
				IF LOCAL == NO:MASTER
					ADDCHARA 0
					CFLAG:LOCAL:311 = WK_ARG
				ELSE
					ADDCHARA LOCAL
				ENDIF
			NEXT
			RETURN 0
		ELSEIF RESULT == 1
			DELCHARA 1
		GOTO INPUT_LOOP
		
		ELSE
		GOTO INPUT_LOOP_1
		
		ENDIF
		
ELSE

	GOTO INPUT_LOOP
	
ENDIF

RETURN 0	
	
;---------------------------------------	
;素質コピー
;--------------------------------------
@COPY_CUSTOM(ARG)
PRINTL 誰の能力をコピーしますか？

$INPUT_LOOP
FOR LOCAL,0,CHARANUM
	IF LOCAL == ARG
		;
	ELSE
	PRINTFORML [{LOCAL,3}] - %CALLNAME:LOCAL%
	ENDIF
NEXT
PRINTL [999] - やめる
	
INPUT
IF 0 < RESULT && RESULT < 開始時人数
	TARGET = RESULT
	$INPUT_LOOP_1
	PRINTFORML %CALLNAME:ARG%に%CALLNAME:TARGET%の素質をコピーします。よろしいですか？
	PRINTL [0] はい
	PRINTL [1] 考え直す
		INPUT
		IF RESULT == 0
			FOR LOCAL,0,191
			TALENT:ARG:LOCAL = TALENT:TARGET:LOCAL
			NEXT
		PRINTL コピーしました。
		ELSEIF RESULT == 1
			GOTO INPUT_LOOP
		ELSE
			GOTO INPUT_LOOP_1
		ENDIF
			
ELSEIF RESULT == 999
	RETURN 0
ELSE
	GOTO INPUT_LOOP
ENDIF

RETURN 0	
