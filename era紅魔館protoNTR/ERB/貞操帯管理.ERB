;==============================================================================
;貞操帯関係
;　貞操帯やペニス用貞操帯の装着、解除処理
;==============================================================================

;--------------------------------------------------
;貞操帯関連
;--------------------------------------------------

;--------------------------------------------------
;ペニス用貞操帯関連
;　使用フラグ
;　CFLAG:人物:ペニス用貞操帯着用　0=未装着, それ以外=装着時刻
;　CFLAG:人物:ペニス用貞操帯装着者　-1=未装着, それ以外=装着させた人
;　CFLAG:人物:ペニス用貞操帯種別　0=未装着, 1=勃起時苦痛なし, 2=勃起時苦痛あり, -1=一時的解除
;--------------------------------------------------

;--------------------------------------------------
;ペニス用貞操帯装着
;--------------------------------------------------
@MOUNT_P_CHASTITY_BELT(被害者, 加害者, 種別)
	#DIM 被害者		; 貞操帯を装着させられる人
	#DIM 加害者		; 貞操帯を装着させる人
	#DIM 種別		; 貞操帯種別
	
	IF -1 == 加害者
		PRINTFORML !!! ERROR IN MOUNT_P_CHASTITY_BELT {被害者}, {加害者}, {種別}
		RETURN
	ENDIF
	CFLAG:被害者:ペニス用貞操帯着用 = TIME_PROGRESS(0)
	CFLAG:被害者:ペニス用貞操帯装着者 = 加害者
	CFLAG:被害者:ペニス用貞操帯種別 = 種別
RETURN

;--------------------------------------------------
;ペニス用貞操帯解除
;--------------------------------------------------
@DISMOUNT_P_CHASTITY_BELT(被害者)
	#DIM 被害者		; 貞操帯を装着してる人
	
	CFLAG:被害者:ペニス用貞操帯着用 = 0
	CFLAG:被害者:ペニス用貞操帯装着者 = -1
	CFLAG:被害者:ペニス用貞操帯種別 = 0
RETURN

;--------------------------------------------------
;ペニス用貞操帯解除チェック関数
;@RETURN 1:解除可能　0:解除不可能
;--------------------------------------------------
@CHK_DISMOUNT_P_CHASTITY_BELT(被害者, 解除者)
	#FUNCTION
	#DIM 被害者		; 貞操帯を装着してる人
	#DIM 解除者		; 貞操帯を解除する人

	IF CFLAG:被害者:ペニス用貞操帯装着者 == 解除者
		RETURNF 1
	ELSE
		RETURNF 0
	ENDIF
RETURNF 0
