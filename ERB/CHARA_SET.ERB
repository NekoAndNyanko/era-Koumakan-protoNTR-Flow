;option 12
;キャラクター設定系
@CHARA_RESET
#DIM select
PRINTL 
PRINTL [1]更改角色的名字
PRINTFORML [2]个别角色初始化
PRINTFORML [3]全部角色初始化 (%CALLNAME:MASTER%除外)
PRINTL [999]-返回

$INPUT_LOOP
INPUT
IF RESULT == 1
	$RE_LOOP1
	PRINTL 
	PRINTL 要更改哪一个？
	PRINTL [1] NAME - 名前
	PRINTL [2] CALLNAME - 通称
	PRINTL [999]-返回

	$INPUT_LOOP1
	INPUT
	IF RESULT == 1
		PRINTL 
		PRINTL 请选择改变NAME的角色
		FOR LOCAL, 0, CHARANUM
			PRINTFORM [{LOCAL, 3}]%NAME:LOCAL, 16, LEFT%
			SETCOLOR 色設定_テキスト_備考
			PRINTFORML (%CALLNAME:LOCAL%)
			RESETCOLOR
		NEXT
		PRINTL [999]-返回
		$INPUT_LOOP1_1
		INPUT
		IF RESULT >= 0 && RESULT < CHARANUM
			LOCAL = RESULT
			PRINTL 
			PRINTFORM %NAME:LOCAL%の名前を入力してください
			SETCOLOR 色設定_テキスト_備考
			PRINTL 　　(無入力でデフォルトに戻す)
			RESETCOLOR
			INPUTS
			IF STRLENS(RESULTS) > 30
				PRINTW 名字太长了
				GOTO INPUT_LOOP1_1
			ELSEIF STRLENS(RESULTS) == 0
				NAME:LOCAL = %CSVNAME(NO:LOCAL)%
				PRINTFORMW 命名为%NAME:LOCAL%了
				PRINTL 
			ELSE
				NAME:LOCAL = %RESULTS%
				PRINTFORMW 命名为%NAME:LOCAL%了
				PRINTL 
			ENDIF
		ELSEIF RESULT != 999
			GOTO INPUT_LOOP1_1
		ENDIF
		GOTO RE_LOOP1
	ELSEIF RESULT == 2
		PRINTL 
		PRINTL 请选择改变CALLNAME的角色
		FOR LOCAL, 0, CHARANUM
			PRINTFORML [{LOCAL, 3}]%CALLNAME:LOCAL, 16, LEFT%
		NEXT
		PRINTL [999]-返回
		$INPUT_LOOP2_1
		INPUT
		IF RESULT >= 0 && RESULT < CHARANUM
			LOCAL = RESULT
			PRINTL 
			PRINTFORM %CALLNAME:LOCAL%の名前を入力してください
			SETCOLOR 色設定_テキスト_備考
			PRINTL 　　(無入力でデフォルトに戻す)
			RESETCOLOR
			INPUTS
			IF STRLENS(RESULTS) > 20
				PRINTW 名字太长了
				GOTO INPUT_LOOP2_1
			ELSEIF STRLENS(RESULTS) == 0
				CALLNAME:LOCAL = %CSVCALLNAME(NO:LOCAL)%
				PRINTFORMW 命名为%CALLNAME:LOCAL%了
				PRINTL 
			ELSE
				CALLNAME:LOCAL = %RESULTS%
				PRINTFORMW 命名为%CALLNAME:LOCAL%了
				PRINTL 
			ENDIF
		ELSEIF RESULT != 999
			GOTO INPUT_LOOP2_1
		ENDIF
		GOTO RE_LOOP1
	ELSEIF RESULT != 999
		GOTO INPUT_LOOP1
	ENDIF
ELSEIF RESULT == 2
	$RE_LOOP2
	PRINTL 
	PRINTL 请选择初始化的设定和角色
	PRINTL 
	PRINTL - 設定
	PRINT [0] 处女設定：
	IF select & 1
		SETCOLOR 色設定_設定_肯定的
		PRINTFORML 有
	ELSE
		SETCOLOR 色設定_設定_無効化
		PRINTFORML 无
	ENDIF
	RESETCOLOR
	PRINTL 
	FOR LOCAL, 1, CHARANUM
		PRINTFORM [{LOCAL, 3}]%NAME:LOCAL, 16, LEFT%
		SETCOLOR 色設定_テキスト_備考
		PRINTFORML (%CALLNAME:LOCAL%)
		RESETCOLOR
	NEXT
	PRINTL [999]-返回
	$INPUT_LOOP_S
	INPUT
	IF RESULT == 0
		select += (select & 1) ? -1 # 1
		GOTO RE_LOOP2
	ELSEIF RESULT > 0 && RESULT < CHARANUM
		LOCAL = RESULT
		LOCALS = %CALLNAME:LOCAL%
		ADDCHARA LOCAL
		SWAPCHARA LOCAL, CHARANUM-1
		DELCHARA CHARANUM-1
		IF select & 1
			TALENT:LOCAL:处女 = 1
			EXP:LOCAL:Ｖ经验 = 0
			EXP:LOCAL:Ｖ性交经验 = 0
			EXP:LOCAL:Ａ性交经验 = 0
			ABL:LOCAL:Ｖ感觉 = 0
			ABL:LOCAL:Ａ感觉 = 0
		ENDIF
		IF 人物_美铃 <= LOCAL && LOCAL <= 人物_魔理沙
			TRYCALLFORM 体詳細初期設定{LOCAL}(LOCAL)
		ENDIF
		PRINTFORMW 把%LOCALS%初始化了
		PRINTL 
	ELSEIF RESULT != 999
		GOTO INPUT_LOOP_S
	ENDIF
ELSEIF RESULT == 3
	$RE_LOOP3
	PRINTL 
	PRINTFORML 把%CALLNAME:MASTER%以外的人物全都初始化吗？
	PRINT [0] 处女設定：
	IF select & 1
		SETCOLOR 色設定_設定_肯定的
		PRINTFORML 有
	ELSE
		SETCOLOR 色設定_設定_無効化
		PRINTFORML 无
	ENDIF
	RESETCOLOR
	PRINTL 
	PRINTL [1] 是的
	PRINTL [2] 放弃
	$INPUT_LOOP_S2
	INPUT
	IF RESULT == 0
		select += (select & 1) ? -1 # 1
		GOTO RE_LOOP3
	ELSEIF RESULT == 1
		FOR LOCAL,1,CHARANUM
			DELCHARA 1
		NEXT
		FOR LOCAL,1,開始時人数
			ADDCHARA LOCAL
			IF select & 1
				TALENT:LOCAL:处女 = 1
				EXP:LOCAL:Ｖ经验 = 0
				EXP:LOCAL:Ｖ性交经验 = 0
				EXP:LOCAL:Ａ性交经验 = 0
				ABL:LOCAL:Ｖ感觉 = 0
				ABL:LOCAL:Ａ感觉 = 0
			ENDIF
			IF 人物_美铃 <= LOCAL && LOCAL <= 人物_露米娅
				TRYCALLFORM 体詳細初期設定{LOCAL}(LOCAL)
			ENDIF
		NEXT
		PRINTFORMW 全都初始化了
		PRINTL 
	ELSEIF RESULT != 2
		GOTO INPUT_LOOP_S2
	ENDIF
ENDIF
