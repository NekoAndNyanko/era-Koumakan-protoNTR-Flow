@GET_SUCCESS_RATE
#FUNCTION
VARSET LOCAL
;顺从
LOCAL += ABL:顺从 * 5
LOCAL += GETPALAMLV(PALAM:恭顺,5) * 3

;反抗的.素直
LOCAL -= TALENT:态度 * 5
;気丈
SIF TALENT:胆量 > 0
	LOCAL -= 5

;自尊心高い
SIF TALENT:自尊心 > 0
	LOCAL -= 15
;自尊心低い
SIF TALENT:自尊心 < 0
	LOCAL += 5
;表现欲
SIF TALENT:表现欲
	LOCAL += 2
;抑圧
SIF TALENT:自己爱 < 0
	LOCAL -= 10
;抵抗
SIF TALENT:抵抗
	LOCAL -= 10
;立即陷落
SIF TALENT:立即陷落
	LOCAL += 10
;性別嗜好
SIF (TALENT:性別嗜好 & 1 && !(HAS_VAGINA(PLAYER))) || (TALENT:性別嗜好 & 2 && HAS_VAGINA(PLAYER))
	LOCAL -= 7

;調教者の素質
;魅惑
SIF TALENT:PLAYER:魅惑
	LOCAL += 6
;迷の魅力
SIF TALENT:PLAYER:迷の魅力
	LOCAL += 6

;相性チェック
SELECTCASE RELATION:(NO:PLAYER)
	CASE IS > 0, IS < 30
		LOCAL -= 10
	CASE IS > 0, IS < 70
		LOCAL -= 6
	CASE IS > 0, IS < 100
		LOCAL -= 3
	CASE IS >= 100, IS < 130
		LOCAL += 3
	CASE IS >= 100, IS < 170
		LOCAL += 6
	CASE IS >= 100, IS >= 170
		LOCAL += 10
ENDSELECT

;好感度
LOCAL += CFLAG:好感度 / 50

;恋慕
SIF TALENT:恋慕
	LOCAL += 20
;亲爱
SIF TALENT:恋慕 > 1
	LOCAL += 40
LOCAL += (CFLAG:MASTER:館内地位 - CFLAG:TARGET:館内地位) / 500

SIF LOCAL < 0
	LOCAL = 0

RETURNF LOCAL
