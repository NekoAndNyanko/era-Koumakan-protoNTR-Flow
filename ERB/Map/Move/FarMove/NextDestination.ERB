;原名：次の目的地
;想要到达“当前目的地”，就必须先途经RETURNF的位置，例如想要到达图书馆，就必须先到达大厅。
;如果有不同情况的，则通过“出发地”来区分，例如大厅：从院子到大厅，应该经过后门（厨房）；而馆外则要先到达正门；其余情况（出发地在二楼）则要先到达二楼楼梯间。
;总之，依次递归，就可以求出每一步的路径点。
;当一步不能到达时（@CAN_MOVE(出发地, 目的地)返回0时）才会调用，所以只需要考虑一步以上才能到达的情况（如分类讨论正门时不需要考虑守卫小屋等房间）
;(場所, 場所)=>場所
@前置目的地计算(出发地, 当前目的地)
#FUNCTION
#DIM 出发地
#DIM 当前目的地
SELECTCASE 当前目的地
;红魔馆区域----------------------------------------------------------------------------------------------------
	CASE 位置_红魔馆_正门
		;处于红魔馆内部时要先抵达大厅，在红魔馆外部时要先抵达雾之湖与红魔馆接壤的部分。
		IF 位置所在区域(出发地) == 区域_红魔馆
			RETURNF 位置_红魔馆_大厅
		ELSE
			RETURNF 位置_雾之湖_湖北部
		ENDIF
	CASE 位置_红魔馆_大厅
		;守卫小屋与馆外从正门进，后院及其它屋外部分从后门（厨房）进，其余情况属于二楼，从楼梯下来。
		IF 位置所在区域(出发地) != 区域_红魔馆
			RETURNF 位置_红魔馆_正门
		ELSE
			IF 出发地 == 位置_红魔馆_守卫小屋
				RETURNF 位置_红魔馆_正门
			ELSEIF GROUPMATCH(出发地, 位置_红魔馆_仓库, 位置_红魔馆_后院, 位置_红魔馆_屋外厕所)
				RETURNF 位置_红魔馆_厨房
			ELSEIF GROUPMATCH(出发地, 位置_红魔馆_帕秋莉私室, 位置_红魔馆_小恶魔私室)
				RETURNF 位置_红魔馆_大图书馆
			ELSEIF GROUPMATCH(出发地, 位置_红魔馆_地下室, 位置_红魔馆_大浴场, 位置_红魔馆_地下房间甲, 位置_红魔馆_地下房间乙, 位置_红魔馆_更衣室)
				RETURNF 位置_红魔馆_地下室走廊
			ELSEIF GROUPMATCH(出发地, 位置_红魔馆_二楼走廊, 位置_红魔馆_咲夜私室, 位置_红魔馆_妖精女仆办公室, 位置_红魔馆_玩家房间, 位置_红魔馆_蕾米莉亚私室, 位置_红魔馆_二楼厕所, 位置_红魔馆_三楼阳台, 位置_红魔馆_二楼阳台)
				RETURNF 位置_红魔馆_二楼楼梯间
			ENDIF
		ENDIF
	CASE 位置_红魔馆_餐厅
		IF GROUPMATCH(出发地, 位置_红魔馆_仓库, 位置_红魔馆_后院, 位置_红魔馆_屋外厕所)
			RETURNF 位置_红魔馆_厨房
		ELSE
			RETURNF 位置_红魔馆_大厅
		ENDIF
	CASE 位置_红魔馆_大图书馆
		RETURNF 位置_红魔馆_大厅
	CASE 位置_红魔馆_厨房
		IF GROUPMATCH(出发地, 位置_红魔馆_仓库, 位置_红魔馆_屋外厕所)
			RETURNF 位置_红魔馆_后院
		ELSE
			RETURNF 位置_红魔馆_大厅
		ENDIF
	CASE 位置_红魔馆_仓库
		RETURNF 位置_红魔馆_后院
	CASE 位置_红魔馆_帕秋莉私室
		RETURNF 位置_红魔馆_大图书馆
	CASE 位置_红魔馆_小恶魔私室
		RETURNF 位置_红魔馆_大图书馆
	CASE 位置_红魔馆_守卫小屋
		IF 出发地 == 位置_红魔馆_厨房
			RETURNF 位置_红魔馆_后院
		ELSE
			RETURNF 位置_红魔馆_正门
		ENDIF
	CASE 位置_红魔馆_后院
		RETURNF 位置_红魔馆_厨房
	CASE 位置_红魔馆_二楼楼梯间
		;二楼和三楼的所有地点都要先到走廊，其余情况先到大厅。
		IF GROUPMATCH(出发地, 位置_红魔馆_咲夜私室, 位置_红魔馆_妖精女仆办公室, 位置_红魔馆_玩家房间, 位置_红魔馆_二楼厕所, 位置_红魔馆_蕾米莉亚私室, 位置_红魔馆_三楼阳台, 位置_红魔馆_二楼阳台)
			RETURNF 位置_红魔馆_二楼走廊
		ELSE
			RETURNF 位置_红魔馆_大厅
		ENDIF
	CASE 位置_红魔馆_二楼走廊
		IF 出发地 == 位置_红魔馆_三楼阳台
			RETURNF 位置_红魔馆_蕾米莉亚私室
		ELSE
			RETURNF 位置_红魔馆_二楼楼梯间
		ENDIF
	CASE 位置_红魔馆_咲夜私室
		RETURNF 位置_红魔馆_二楼走廊
	CASE 位置_红魔馆_妖精女仆办公室
		RETURNF 位置_红魔馆_二楼走廊
	CASE 位置_红魔馆_玩家房间
		RETURNF 位置_红魔馆_二楼走廊
	CASE 位置_红魔馆_蕾米莉亚私室
		RETURNF 位置_红魔馆_二楼走廊
	CASE 位置_红魔馆_地下室
		RETURNF 位置_红魔馆_地下室走廊
	CASE 位置_红魔馆_大浴场
		RETURNF 位置_红魔馆_更衣室
	CASE 位置_红魔馆_屋外厕所
		RETURNF 位置_红魔馆_后院
	CASE 位置_红魔馆_一楼厕所
		RETURNF 位置_红魔馆_大厅
	CASE 位置_红魔馆_二楼厕所
		RETURNF 位置_红魔馆_二楼走廊
	CASE 位置_红魔馆_三楼阳台
		RETURNF 位置_红魔馆_蕾米莉亚私室
	CASE 位置_红魔馆_地下室走廊
		IF 出发地 == 位置_红魔馆_大浴场
			RETURNF 位置_红魔馆_更衣室
		ELSE
			RETURNF 位置_红魔馆_大厅
		ENDIF
	CASE 位置_红魔馆_会客厅
		RETURNF 位置_红魔馆_大厅
	CASE 位置_红魔馆_更衣室
		RETURNF 位置_红魔馆_地下室走廊
	CASE 位置_红魔馆_地下房间甲
		RETURNF 位置_红魔馆_地下室走廊
	CASE 位置_红魔馆_地下房间乙
		RETURNF 位置_红魔馆_地下室走廊
	CASE 位置_红魔馆_二楼阳台
		RETURNF 位置_红魔馆_二楼走廊
;雾之湖区域----------------------------------------------------------------------------------------------------
	CASE 位置_雾之湖_湖北部
		IF 位置所在区域(出发地) == 区域_红魔馆
			RETURNF 位置_红魔馆_正门
		ELSE
			RETURNF 位置_雾之湖_湖南部
		ENDIF
	CASE 位置_雾之湖_琪露诺的家 
		RETURNF 位置_雾之湖_湖北部
	CASE 位置_雾之湖_大妖精的家 
		RETURNF 位置_雾之湖_湖北部
	CASE 位置_雾之湖_湖南部
		IF 位置所在区域(出发地) == 区域_红魔馆
			RETURNF 位置_雾之湖_湖北部
		ELSEIF 位置所在区域(出发地) == 区域_雾之湖
			RETURNF 位置_雾之湖_湖北部
[SKIPSTART]
			IF GROUPMATCH(出发地, 位置_雾之湖_琪露诺的家, 位置_雾之湖_大妖精的家, 位置_雾之湖_北湖畔)
				RETURNF 位置_雾之湖_湖北部
			ELSE
				RETURNF 
			ENDIF
[SKIPEND]
		ELSE
			RETURNF 位置_魔法之森_森林岔路
		ENDIF
	CASE 位置_雾之湖_北湖畔
		RETURNF 位置_雾之湖_湖北部
;魔法之森区域----------------------------------------------------------------------------------------------------
	CASE 位置_魔法之森_雾雨魔法店 
		RETURNF 位置_魔法之森_大树广场
	CASE 位置_魔法之森_森林岔路
		IF 位置所在区域(出发地) == 区域_红魔馆 || 位置所在区域(出发地) == 区域_雾之湖
			RETURNF 位置_雾之湖_湖南部
		ELSE
			RETURNF 位置_魔法之森_大树广场
		ENDIF
	CASE 位置_魔法之森_露米娅的树屋
		RETURNF 位置_魔法之森_森林岔路
	CASE 位置_魔法之森_爱丽丝的家
		RETURNF 位置_魔法之森_森林岔路
	CASE 位置_魔法之森_大树广场
		RETURNF 位置_魔法之森_森林岔路
	CASE 位置_魔法之森_电波塔
		RETURNF 位置_魔法之森_大树广场
	CASE 位置_魔法之森_成美的家
		RETURNF 位置_魔法之森_森林岔路
	CASE 位置_魔法之森_地藏台石
		RETURNF 位置_魔法之森_森林岔路
;其它区域----------------------------------------------------------------------------------------------------
	CASE 位置_博麗神社
		RETURNF 位置_雾之湖_湖北部
ENDSELECT
THROW 【错误】方法 @前置目的地计算 出错，出现了没有设置的目的地，参数如下：[出发地]:{出发地} [当前目的地]:{当前目的地}